# 💎 micromark-extension-sapphire

ルビ（ふりがな）の導入を実装する micromark 拡張です。

## 文法

### 基本的な記述

以下のように記述することで、文字とそのルビを表現することができます。

```markdown
[蒼玉]<<サファイア>>
```

実装によりますが、これは基本的に次のように表示されます：
<ruby> 蒼玉 <rt> サファイア </rt> </ruby>

`[` `]`で囲まれた部分はベーステキストを、`<<` `>>`で囲まれた部分はルビテキストを表します。\
ルビテキストの囲み`<<` `>>`は不等号記号（`U+003C`, `U+003E`）です。\
伝統的には、日本語環境においてルビを表すさい`《` `》`（二重山括弧）が使用されてきたようです。（[青空文庫 ↗](https://www.aozora.gr.jp/aozora-manual/index-input.html#markup) など。）\
💎 sapphire 文法では、入力のしやすさ、互換性などの理由から、より一般的な記号である不等号記号を重ねることで表現しています。

### 分割表現

ルビを文字ごとに振るために、以下のようにテキストを分割して記述することができます。

```markdown
[水|天|一|碧]<<すい|てん|いっ|ぺき>>
```

ベーステキストとルビテキストは、同じ数に分割される必要があります。\
これは、次のように記述するのと同じことです。

```markdown
[水]<<すい>> [天]<<てん>> [一]<<いっ>> [碧]<<ぺき>>
```

### 分割表現によるルビのスキップ

> [!CAUTION]\
> この記法は現在未実装です。将来のバージョンで対応する予定です。

分割記法では、ルビを振りたくないベーステキストに対応するルビ部分に何も書かないことで、そのルビをスキップできます。つまり、

```markdown
[青天|の|霹靂]<<せいてん||へきれき>>
```

このように記述することで、2番目のベーステキスト「の」にはルビが振られません。\
これは、次のように記述するのと同じことです。

```markdown
[青天]<<せいてん>> の [霹靂]<<へきれき>>
```

### その他

強調、インラインコードなどのインライン要素をベーステキストに含めることができます。

```markdown
[*青色発光*]<<あおいろはっこう>>ダイオード
[**未開拓**市場]<<ブルーオーシャン>> 
[`const blue = "#1A4472"`]<<アントワープブルー>>
```
